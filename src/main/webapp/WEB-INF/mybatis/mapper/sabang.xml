<?xml version="1.0" encoding="euc-kr" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycompany.sabangpalbang.dao.SabangDao">
	<insert id="insertBySabang" parameterType="sabang">
		<selectKey keyProperty="sabang_id" resultType="int"
			order="BEFORE">
			select seq_sabang_id.nextval from dual
		</selectKey>
		insert into sabang
		(sabang_id, sabang_name, sabang_price,
		sabang_saleprice, sabang_buycount, sabang_viewcount, sabang_imgoname,
		sabang_imgsname, sabang_imgtype, sabang_state)
		values
		(#{sabang_id},
		#{sabang_name}, #{sabang_price}, #{sabang_saleprice},
		#{sabang_buycount}, #{sabang_viewcount}, #{sabang_imgoname},
		#{sabang_imgsname}, #{sabang_imgtype}, #{sabang_state})
	</insert>

	<select id="selectBySabang" parameterType="int"
		resultType="sabang">
		select sabang_id, sabang_name, sabang_price,
		sabang_saleprice, sabang_buycount, sabang_viewcount,
		sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
		from sabang
		where
		sabang_id=#{sabang_id}
	</select>

	<!-- 사방 정렬_판매율 순 (default)  -->
	<select id="selectByBuy" parameterType="pager"
		resultType="sabang">
		select rnum, sabang_id, sabang_name, sabang_price,
		sabang_saleprice, sabang_buycount, sabang_viewcount,
		sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
		from (
			select rownum as rnum, sabang_id, sabang_name, sabang_price,
			sabang_saleprice, sabang_buycount, sabang_viewcount,
			sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
			from (
				select sabang_id, sabang_name, sabang_price,
				sabang_saleprice, sabang_buycount, sabang_viewcount,
				sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
				from sabang
				order by sabang_buycount desc
			)
			where rownum &lt;= #{endRowNo}
		)
		where rnum &gt;= #{startRowNo}
	</select>
	
	<!-- 사방 정렬_낮은 가격순-->
	<select id="selectByLow" parameterType="pager"
		resultType="sabang">
			select rnum, sabang_id, sabang_name, sabang_price,
			sabang_saleprice, sabang_buycount, sabang_viewcount,
			sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
			from (
				select rownum as rnum, sabang_id, sabang_name, sabang_price,
				sabang_saleprice, sabang_buycount, sabang_viewcount,
				sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
				from (
					select sabang_id, sabang_name, sabang_price,
					sabang_saleprice, sabang_buycount, sabang_viewcount,
					sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
					from sabang
					order by sabang_saleprice 
				)
				where rownum &lt;= #{endRowNo}
			)
			where rnum &gt;= #{startRowNo}
	</select>
	
	<!-- 사방 정렬_높은 가격 순  -->
	<select id="selectByHigh" parameterType="pager"
		resultType="sabang">
		select rnum, sabang_id, sabang_name, sabang_price,
		sabang_saleprice, sabang_buycount, sabang_viewcount,
		sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
		from (
			select rownum as rnum, sabang_id, sabang_name, sabang_price,
			sabang_saleprice, sabang_buycount, sabang_viewcount,
			sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
			from (
				select sabang_id, sabang_name, sabang_price,
				sabang_saleprice, sabang_buycount, sabang_viewcount,
				sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
				from sabang
				order by sabang_saleprice desc
			)
			where rownum &lt;= #{endRowNo}
		)
		where rnum &gt;= #{startRowNo}
	</select>
	
	<!-- 사방 정렬_조회수  -->
	<select id="selectByView" parameterType="pager"
		resultType="sabang">
		select rnum, sabang_id, sabang_name, sabang_price,
		sabang_saleprice, sabang_buycount, sabang_viewcount,
		sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
		from (
			select rownum as rnum, sabang_id, sabang_name, sabang_price,
			sabang_saleprice, sabang_buycount, sabang_viewcount,
			sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
			from (
				select sabang_id, sabang_name, sabang_price,
				sabang_saleprice, sabang_buycount, sabang_viewcount,
				sabang_imgoname, sabang_imgsname, sabang_imgtype, sabang_state
				from sabang
				order by sabang_viewcount desc
			)
			where rownum &lt;= #{endRowNo}
		)
		where rnum &gt;= #{startRowNo}
	</select>
	
	<select id="count" resultType="int">
      select count(*) from sabang
   </select>


	<update id="updateBySabang" parameterType="sabang">
		update sabang set
		sabang_name=#{sabang_name},
		sabang_price=#{sabang_price},
		sabang_saleprice=#{sabang_saleprice},
		sabang_imgoname=#{sabang_imgoname},
		sabang_imgsname=#{sabang_imgsname},
		sabang_imgtype=#{sabang_imgtype},
		sabang_state=#{sabang_state}
		where sabang_id=#{sabang_id}
	</update>



	<delete id="deleteBySabang" parameterType="int">
		delete from sabang
		where sabang_id=#{sabang_id}
	</delete>


</mapper>